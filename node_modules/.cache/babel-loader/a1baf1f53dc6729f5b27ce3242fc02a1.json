{"ast":null,"code":"import _defineProperty from\"D:/React Self Projects/Verify-Otp/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"D:/React Self Projects/Verify-Otp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/React Self Projects/Verify-Otp/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"D:/React Self Projects/Verify-Otp/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/React Self Projects/Verify-Otp/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{RecaptchaVerifier}from\"firebase/auth\";import{getAuth,signInWithPhoneNumber}from\"firebase/auth\";import'./App.css';import Document from'./component/Document';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.handleChange=function(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;_this.setState(_defineProperty({},name,value));};_this.configureCaptcha=function(){var auth=getAuth();window.recaptchaVerifier=new RecaptchaVerifier('sign-in-button',{'size':'invisible','callback':function callback(response){// reCAPTCHA solved, allow signInWithPhoneNumber.\n_this.onSignInSubmit();console.log(\"recaptcha verified\");}},auth);};_this.onSignInSubmit=function(e){e.preventDefault();_this.configureCaptcha();var phoneNumber=\"+91\"+_this.state.mobile;console.log(phoneNumber);var appVerifier=window.recaptchaVerifier;var auth=getAuth();signInWithPhoneNumber(auth,phoneNumber,appVerifier).then(function(confirmationResult){window.confirmationResult=confirmationResult;console.log(\"otp has been sent\");}).catch(function(error){console.log(\"SMS not sent\");});};_this.onSubmitOTP=function(e){e.preventDefault();var code=_this.state.otp;console.log(code);window.confirmationResult.confirm(code).then(function(result){// User signed in successfully.\nvar user=result.user;console.log(JSON.stringify(user));alert(\"User is verified\");_this.setState(function(prevState){return{message:\"User is Verified\"};});}).catch(function(error){// User couldn't sign in (bad verification code?)\n// ...\nconsole.log(\"Enter correct OTP\");_this.setState(function(prevState){return{message:\"Enter correct OTP\"};});});};_this.state={message:\"\"};return _this;}_createClass(App,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"outerDiv\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"innerDiv\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Enter Phone Number\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSignInSubmit,children:[/*#__PURE__*/_jsx(\"div\",{id:\"sign-in-button\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"mobile\",placeholder:\"Mobile number\",required:true,onChange:this.handleChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Send Otp\"})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Enter OTP\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSubmitOTP,children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"otp\",placeholder:\"OTP Number\",required:true,onChange:this.handleChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Verify Otp\"})]}),/*#__PURE__*/_jsx(\"h4\",{children:this.state.message})]})});}}]);return App;}(React.Component);export default App;","map":{"version":3,"names":["React","RecaptchaVerifier","getAuth","signInWithPhoneNumber","Document","App","props","handleChange","e","target","name","value","setState","configureCaptcha","auth","window","recaptchaVerifier","response","onSignInSubmit","console","log","preventDefault","phoneNumber","state","mobile","appVerifier","then","confirmationResult","catch","error","onSubmitOTP","code","otp","confirm","result","user","JSON","stringify","alert","prevState","message","Component"],"sources":["D:/React Self Projects/Verify-Otp/src/App.js"],"sourcesContent":["import React from 'react'\n\nimport { RecaptchaVerifier } from \"firebase/auth\";\nimport { getAuth, signInWithPhoneNumber } from \"firebase/auth\";\nimport './App.css'\nimport Document from './component/Document';\n\nclass App extends React.Component {\n\n  constructor(props){\n    super(props);\n    this.state = {\n    message : \"\"\n    }\n  }\n\n  handleChange = (e) =>{\n    const {name, value } = e.target\n    this.setState({\n        [name]: value\n      })\n  }\n\n  configureCaptcha = () =>{\n \n    const auth = getAuth();\n    window.recaptchaVerifier = new RecaptchaVerifier('sign-in-button', {\n      'size': 'invisible',\n      'callback': (response) => {\n        // reCAPTCHA solved, allow signInWithPhoneNumber.\n        this.onSignInSubmit();\n        console.log(\"recaptcha verified\")\n      }\n    }, auth);\n  }\n\n  onSignInSubmit = (e) =>{\n    e.preventDefault();\n    this.configureCaptcha();\n\n    const phoneNumber =\"+91\" +  this.state.mobile;\n    console.log(phoneNumber);\n\n    const appVerifier = window.recaptchaVerifier;\n    \n    const auth = getAuth();\n    signInWithPhoneNumber(auth, phoneNumber, appVerifier)\n        .then((confirmationResult) => {\n          window.confirmationResult = confirmationResult;\n          console.log(\"otp has been sent\")\n \n        }).catch((error) => {\n            console.log(\"SMS not sent\")\n        });\n  }\n\n  onSubmitOTP = e =>{\n    e.preventDefault();\n    const code = this.state.otp;\n    console.log(code);\n    window.confirmationResult.confirm(code).then((result) => {\n      // User signed in successfully.\n      const user = result.user;\n      console.log(JSON.stringify(user))\n      alert(\"User is verified\")\n      this.setState(prevState => {\n        return { message: \"User is Verified\" };\n        });\n    }).catch((error) => {\n      // User couldn't sign in (bad verification code?)\n      // ...\n      console.log(\"Enter correct OTP\");\n      this.setState(prevState => {\n        return { message: \"Enter correct OTP\" };\n      });\n});\n  }\n\n  render() {\n    return (\n      <div className='outerDiv'>\n       <div className='innerDiv'>\n       <h2>Enter Phone Number</h2>\n        <form onSubmit={this.onSignInSubmit}>\n          <div id=\"sign-in-button\"></div>\n          <input type=\"number\" name=\"mobile\" placeholder=\"Mobile number\" required onChange={this.handleChange}/>\n          <button type=\"submit\">Send Otp</button>\n        </form>\n\n        <h2>Enter OTP</h2>\n        <form onSubmit={this.onSubmitOTP}>\n          <input type=\"number\" name=\"otp\" placeholder=\"OTP Number\" required onChange={this.handleChange}/>\n          <button type=\"submit\">Verify Otp</button>\n        </form>\n        <h4>{this.state.message}</h4>\n        {/* <Document/> */}\n       </div>\n      </div>\n    )\n  }\n}\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}